(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{4537:function(){},9893:function(e,t,r){Promise.resolve().then(r.bind(r,6281))},6281:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return u},ProtectedRoute:function(){return l},a:function(){return c}});var s=r(7437),n=r(2265),a=r(9376),i=r(9116);let o=(0,n.createContext)(void 0);function u(e){let{children:t}=e,[r,u]=(0,n.useState)(null),[c,l]=(0,n.useState)(!0),d=(0,a.useRouter)();(0,n.useEffect)(()=>{let e=localStorage.getItem("token");e?(i.ZP.setToken(e),h()):l(!1)},[]);let h=async()=>{try{var e;let t=await i.ZP.getMe();(null===(e=t.data)||void 0===e?void 0:e.user)?u(t.data.user):y()}catch(e){y()}finally{l(!1)}},p=async(e,t)=>{try{var r;let s=await i.ZP.login({email:e,password:t});if(s.error)return{success:!1,error:s.error};if(null===(r=s.data)||void 0===r?void 0:r.token)return i.ZP.setToken(s.data.token),u(s.data.user),{success:!0};return{success:!1,error:"Login failed"}}catch(e){return{success:!1,error:e.message||"Login failed"}}},g=async e=>{try{var t;let r=await i.ZP.register(e);if(r.error)return{success:!1,error:r.error};if(null===(t=r.data)||void 0===t?void 0:t.token)return i.ZP.setToken(r.data.token),u(r.data.user),{success:!0};return{success:!1,error:"Registration failed"}}catch(e){return{success:!1,error:e.message||"Registration failed"}}},y=()=>{i.ZP.setToken(null),u(null),d.push("/")};return(0,s.jsx)(o.Provider,{value:{user:r,isLoading:c,isAuthenticated:!!r,login:p,register:g,logout:y,refreshUser:h},children:t})}function c(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function l(e){let{children:t}=e,{isAuthenticated:r,isLoading:i}=c(),o=(0,a.useRouter)();return((0,n.useEffect)(()=>{i||r||o.push("/auth/login")},[i,r,o]),i)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-ocean-500"})}):r?(0,s.jsx)(s.Fragment,{children:t}):null}},9116:function(e,t,r){"use strict";var s=r(3177),n=r(257);(0,s.config)();let a=n.env.NEXT_PUBLIC_API_URL||"http://localhost:3001";class i{setToken(e){this.token=e,e?localStorage.setItem("token",e):localStorage.removeItem("token")}getToken(){return this.token}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token));try{let e=await fetch(r,{...t,headers:s}),n=await e.json();if(!e.ok)throw 401===e.status&&this.setToken(null),Error(n.error||n.message||"Request failed");return{data:n}}catch(e){return{error:e.message||"Network error"}}}async register(e){return this.request("/api/auth/register",{method:"POST",body:JSON.stringify(e)})}async login(e){return this.request("/api/auth/login",{method:"POST",body:JSON.stringify(e)})}async getMe(){return this.request("/api/auth/me")}async getJobs(e){let t=new URLSearchParams;return(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),this.request("/api/jobs?".concat(t.toString()))}async getJob(e){return this.request("/api/jobs/".concat(e))}async createJob(e){return this.request("/api/jobs",{method:"POST",body:JSON.stringify(e)})}async updateJob(e,t){return this.request("/api/jobs/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteJob(e){return this.request("/api/jobs/".concat(e),{method:"DELETE"})}async getApplications(e){let t=new URLSearchParams;return(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),this.request("/api/applications?".concat(t.toString()))}async getApplication(e){return this.request("/api/applications/".concat(e))}async createApplication(e){return this.request("/api/applications",{method:"POST",body:JSON.stringify(e)})}async updateApplication(e,t){return this.request("/api/applications/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteApplication(e){return this.request("/api/applications/".concat(e),{method:"DELETE"})}async getResumes(){return this.request("/api/resumes")}async getResume(e){return this.request("/api/resumes/".concat(e))}async createResume(e){return this.request("/api/resumes",{method:"POST",body:JSON.stringify(e)})}async updateResume(e,t){return this.request("/api/resumes/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteResume(e){return this.request("/api/resumes/".concat(e),{method:"DELETE"})}async generateCoverLetter(e){return this.request("/api/ai/generate-cover-letter",{method:"POST",body:JSON.stringify(e)})}async improveCoverLetter(e){return this.request("/api/ai/improve-cover-letter",{method:"POST",body:JSON.stringify(e)})}async analyzeJobFit(e){return this.request("/api/ai/analyze-job-fit",{method:"POST",body:JSON.stringify(e)})}constructor(){this.baseUrl=a,this.token=null,this.token=localStorage.getItem("token")}}let o=new i;t.ZP=o}},function(e){e.O(0,[218,506,971,117,744],function(){return e(e.s=9893)}),_N_E=e.O()}]);